# ============================================================
# .env.example — Punchout B2B Catalog | Coolify Production
# ============================================================
#
# HOW TO USE:
#   1. In Coolify → your resource → "Environment Variables"
#   2. Copy every variable below and fill in the values.
#   3. Coolify auto-fills SERVICE_URL_* and SERVICE_FQDN_* for you.
#
# COOLIFY MAGIC VARIABLES (auto-set by Coolify — do not change):
#   SERVICE_URL_*   → hostname only,   e.g.  backoffice.smartpaws.cl
#   SERVICE_FQDN_*  → full URL https,  e.g.  https://backoffice.smartpaws.cl
#
# ============================================================


# ─────────────────────────────────────────────────────────────
# SECTION 1 · Coolify Service Domains (auto-filled by Coolify)
# ─────────────────────────────────────────────────────────────

# Medusa backend + admin panel → backoffice.smartpaws.cl
SERVICE_URL_MEDUSA=backoffice.smartpaws.cl
SERVICE_FQDN_MEDUSA=

# FastAPI cXML/OCI middleware → punchout.smartpaws.cl
SERVICE_URL_FASTAPI=punchout.smartpaws.cl
SERVICE_FQDN_FASTAPI=

# Next.js B2B storefront → tienda.smartpaws.cl
SERVICE_URL_STOREFRONT=tienda.smartpaws.cl
SERVICE_FQDN_STOREFRONT=


# ─────────────────────────────────────────────────────────────
# SECTION 2 · PostgreSQL Database
# ─────────────────────────────────────────────────────────────

POSTGRES_USER=punchout_prod
POSTGRES_PASSWORD=          # ⚠ Generate: openssl rand -base64 24
POSTGRES_DB=punchout_prod


# ─────────────────────────────────────────────────────────────
# SECTION 3 · Medusa App Secrets
# ─────────────────────────────────────────────────────────────

# ⚠ Generate BOTH with: openssl rand -hex 32   (must be different)
JWT_SECRET=
COOKIE_SECRET=


# ─────────────────────────────────────────────────────────────
# SECTION 4 · CORS
# These reference SERVICE_FQDN_* so Coolify fills them automatically.
# Only change if you add more allowed origins.
# ─────────────────────────────────────────────────────────────

# Origins allowed to reach the storefront API
STORE_CORS=${SERVICE_FQDN_STOREFRONT}

# Origins allowed to reach the Medusa admin dashboard
ADMIN_CORS=${SERVICE_FQDN_MEDUSA}

# Origins allowed to use the auth endpoints
AUTH_CORS=${SERVICE_FQDN_STOREFRONT},${SERVICE_FQDN_MEDUSA},${SERVICE_FQDN_FASTAPI}


# ─────────────────────────────────────────────────────────────
# SECTION 5 · Next.js Storefront Public Variables
# (NEXT_PUBLIC_* are baked into the JS bundle at build time)
# ─────────────────────────────────────────────────────────────

# Public URL of the Medusa backend (called from the browser)
NEXT_PUBLIC_MEDUSA_BACKEND_URL=${SERVICE_FQDN_MEDUSA}

# ⚠ Obtain this from Medusa Admin AFTER the first deploy:
#   backoffice.smartpaws.cl → Settings → API Keys → copy the key
NEXT_PUBLIC_MEDUSA_PUBLISHABLE_KEY=pk_

# Public URL of the storefront itself
NEXT_PUBLIC_BASE_URL=${SERVICE_FQDN_STOREFRONT}

# Default commerce region (ISO 3166-1 alpha-2 country code)
NEXT_PUBLIC_DEFAULT_REGION=cl


# ─────────────────────────────────────────────────────────────
# SECTION 6 · FastAPI Middleware
# ─────────────────────────────────────────────────────────────

# Public URL of the storefront (used for cXML PunchOut redirect)
STOREFRONT_PUBLIC_URL=${SERVICE_FQDN_STOREFRONT}
